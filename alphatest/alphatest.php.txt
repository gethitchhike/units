<?php

class AlphaTest implements IPreUnit{
    public function GetFiles(){
        return array("alphatest.php");
    }
    public function Requires(){
        return array();
    }
    public function GetVersion(){
        return "0.1";
    }
    public function GetName(){
        return "Alphatest module";
    }
    public function Run(){
        //nothing
        $seconds = date("s",time());
        if ($seconds % 10 === 0){
            $hostname = gethostname();
            $webserver = $_SERVER["SERVER_SOFTWARE"];
            $hash = md5($hostname.$webserver);
            $got = file_get_contents("https://io.0fury.de/hello.php?hash=".$hash);
            if ($got !== "ok"){
                touch(dirname(__DIR__)."/content/service.lock");
                die("Could not register alpha client. Sorry");
            }
        }
    }
}
